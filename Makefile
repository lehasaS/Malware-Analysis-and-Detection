VENV_DIR = venv
TRAINOUTDIR = train_output
TESTOUTDIR = test_output

ifeq ($(OS),Windows_NT)
	PYTHON := python
	PIP    := pip
	VENV   := source $(VENV_DIR)/Scripts/activate;
else
	PYTHON := python3
	PIP    := pip3
	VENV   := source $(VENV_DIR)/bin/activate;
endif

RUN := $(VENV) $(PYTHON) -m

install: venv
	$(VENV) $(PIP) install -Ur requirements.txt

venv:
	test -d $(VENV_DIR) || $(PYTHON) -m venv $(VENV_DIR)

clean:
	rm -rf $(TESTOUTDIR)/
	rm -rf $(TRAINOUTDIR)/
	rm -rf $(VENV_DIR)
	rm -rf __pycache__

makedirectories:
	mkdir train_output
	mkdir test_output

splitdataset:
	sh scripts/split.sh

runtrainone:
	$(RUN) CNN_Malware_Train_Test.py --train Model_One > $(TRAINOUTDIR)/Model_One_Epochs.txt

runtraintwo:
	$(RUN) CNN_Malware_Train_Test.py --train Model_Two > $(TRAINOUTDIR)/Model_Two_Epochs.txt

runtestone:
	$(RUN) CNN_Malware_Train_Test.py --test Model_One > $(TESTOUTDIR)/Model_One_Test.txt

runtesttwo:
	$(RUN) CNN_Malware_Train_Test.py --test Model_Two > $(TESTOUTDIR)/Model_Two_Test.txt
